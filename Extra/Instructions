Здесь будут лежать всякие полезные команды для командной строки ОС Linux ^_^

1. Удалить разрывы/пробелы в строках fasta-файла, сохранив заголовки:
awk '!/^>/ { printf "%s", $0; n = "\n" } /^>/ { print n $0; n = "" } END { printf "%s", n }' in.fasta > out.fasta 

2. Извлечь последовательности из fasta-файла по идентификатору (id.txt список id без '>', in.fasta последовательности без разрывов/пробелов):
seqtk subseq in.fasta id.txt > out.fasta

3. Разбить мульти fasta-файл на отдельные файлы (название файла = id последовательности):
faidx --split-files in.fasta

4. Посчитать количество определенных символов в файле:
cat in.file | tr -cd "SYMBOL" | wc -m

5. Заменить символ на новый символ (включая замену '/', ' ')
awk '{ gsub("symbol_old","symbol_new"); print }' in.file > out.file

6. Извлечь из fastq все последовательности, содержащие подпоследовательность
seqkit grep --by-seq --max-mismatch 1 --pattern "ATCGAAG" in.fastq > out.fastq 

7. Удаляет дублирующие последовательности по id
awk '/^>/{f=!d[$1];d[$1]=1}f' in.fasta > outNoDubl.fasta 

8. Вырезать первый столбец, удалить часть строки после символа "/" и оставить уникальные значния
cut -f1 in.csv | cut -d'/' -f1 | sort -n | uniq > out.txt

9. Подсчитать число файлов определенного разрешения в папке. Для примера файлы с разрешением vcf.gz.tbi
ls -l /path/to/dir | grep vcf.gz.tbi | wc -l

10. Удалить часть строки до определенного символа 
echo "Якутская;53" |cut -d";" -f2

11. Переименовать fasta на основе списка id 
awk 'NR==FNR{names[NR]=$0; next}  /^>/{$1=">"names[++c]}1' names all.fasta | cut -d' ' -f 1 > new_1.fasta

12. Переименовать ID fasta, добавив "имя файла _" в начало хедера
awk '/>/{sub(">","&"FILENAME"_");sub(/\.fasta/,x)}1' input.fa > output.fa

13. Заменить все символы в fasta на N, кроме AGTC
sed '/^[^>]/ s/[^AGTC]/N/gi'

14. Переименовать по словарю список: 
awk -f sc.awk dict.csv list.txt
Содержимое sc.awk
NR == FNR {
  rep[$1] = $2
  next
} 

{
  for (key in rep)
    gsub(key, rep[key])
  print
}

15. Сравнить два файла, напечать match в отдельный столбец при совпадении строки: 
awk 'NR==FNR {a[$1]++; next} $1 in a {$2="match"}1' File2 File1

16. Транслировать нуклеотидные последовательности (из мультифасты) во всевозможные ORF (sixpack) или в аминислотные последовательности в 6 рамках (transeq)
awk '/^>/ {if(x>0) close(outname); x++; outname=sprintf("_%d.fa",x); print > outname;next;} {if(x>0) print >> outname;}' *.fasta

for f in _*.fa
do
    sixpack -sequence $f -outfile $f.sixpack.out -outseq $f.sixpack.fa
done

for f in _*.fa
do
   transeq -frame 6 -sequence $f -outseq $f.sixpack.fa
done

17. Удалить определенное число символов из определенной колонки
(удалит 3 символа из второй колонки)
 awk -v ncr=2 '{$2=substr($2,0,length($2)-ncr)}1' file.txt 
 
 18. Фильтрация fastq по именам: 
for i in *fastq; do seqtk seq -L 150 -a $i | grep -E -i -A 1 "Flavi|Tick|Trinbago|Dengue|Zika|Nile|fever|Langat|encephalitis|Nounane|Usutu|Bagaza|adeno" | grep -v '^--$' > $i.filter.fasta ; done 
 
for i in *.fasta ; do seqkit rmdup -s $i > $i.filter.dupl.fasta ; done

cut -d_ -f 1,3,5,6 221204_103_flu_21L_S68_H1N1.fasta | sed "s/Consensus_/221204_103_/" | sed "s/L_S/L_H1N1_S/" > 221204_103_21L_H1N1.fasta

 
